<div class="container-fluid mt-3">

    <div class="page-header">
      <div class="row align-items-center">
        <div class="col">
          <ul class="breadcrumb">
            <li class="breadcrumb-item">Purchase</li>
            <li class="breadcrumb-item active">Supplier</li>
            <li class="breadcrumb-item active">{{pageTitle}}</li>
            <li *ngIf="pageTitle==='Edit'" class="breadcrumb-item active">
              <span routerLink="/common/product/create" style="color:blue;">
                <i class="fas fa-plus-circle"></i>(Create)</span> <br />
            </li>
            <li *ngIf="pageTitle==='View'" class="breadcrumb-item active">
              <span routerLink="/common/product/edit/{{id}}" style="color:blue;">
                <i class="fas fa-plus-circle"></i>(Edit)</span> <br />
            </li>
          </ul>
        </div>
        <div class="col-auto float-right ml-auto">
          <a id="backBtn" [routerLink]="['/purchase/supplier/list']" class="btn btn-sm btn-outline-secondary">
            <i class="fas fa-times me-1"></i> Back
          </a>
        </div>
      </div>
    </div>
  
  <br />
  
  
    <div class="row">
      <div class="col-lg-12">
        <!-----------------------------------Selling price settings---------------------------------->
          <div class="card customCard">
            <div class="border rounded p-1 position-relative">
              <span class="position-absolute top-0 start-50 translate-middle bg-white px-2 small">
               <b> Supplier {{pageTitle}}</b>
              </span>&nbsp;&nbsp;
        
              <form [formGroup]="purchaseForm">
                <div class="table-responsive mt-0">
                    <table class="table table-striped custom-table">
                      <thead>
                        <th>SL</th>
                        <th  style="width:20%;">Organization</th>
                        <th style="width:15%;">Name</th>
                        <th style="width:12%;">Phone</th>
                        <th style="width:20%;">Address</th>                                           
                      </thead>
                      <tbody formArrayName="purchPrices">
                        <tr *ngFor="let itemrow of allPurchs.controls; let i=index;let l=last" [formGroupName]="i">
                          <td>{{i+1}}</td>
                          <td>
                            <ng-select (keyup)="setSearch($event.target)" [items]="menuOptions"
                            bindLabel="orgName" bindValue="id" formControlName="orgId" (search)="onSearch('Organization')"
                            (scrollToEnd)="loadMore('Organization')" [loading]="loadDropOrg" [clearable]="true"
                            [closeOnSelect]="true" [editableSearchTerm]="false" [addTag]="false" class="form-control-patch">
                          </ng-select>
                          </td>
                           
                          <td>
                            <input  formControlName="name" class="form-control"  type="text">
                          </td>
  
                          <td>
                            <input    formControlName="phone" class="form-control"  type="text">
                          </td>

                          <td>
                            <textarea  formControlName="address" class="form-control" ></textarea>
                          </td>
  
                          <td>
                            <button *ngIf="opMode!=='view'" (click)="removeSell(i)"
                              class="btn btn-danger btn-sm">
                              <i class="fa fa-minus"></i></button>
                            &nbsp;
                            <button *ngIf="opMode!=='view'" (click)="addSell(i)" class="btn btn-danger btn-sm">
                              <i class="fa fa-plus"></i>
                            </button>
                          </td>
  
                        </tr>
                      </tbody>
                    </table>
                </div>
              </form>
            </div>
          </div>
        
        &nbsp;&nbsp;       
        <div class="d-flex gap-2 mt-2" *ngIf="opMode==='edit' || opMode==='create'">
          <button type="submit" class="btn btn-sm btn-primary" (click)="onSubmit()">
            <i class="fas fa-save me-1"></i> Save
          </button>
        </div>
  
  
      </div>
    </div>
  
  
  
    <div *ngIf="loading" class="loader-overlay">
      <div class="spinner"></div>
      <span>Saving user...</span>
    </div>
  
    <!---- child menu details -->
  
    <!-- /Delete Modal -->
    <br />
  
    <!-- simple-modal.component.html -->
  
    <!-- Button to trigger modal -->
    <button #myButton type="button" style="display:none;" class="btn btn-primary" data-bs-toggle="modal"
      data-bs-target="#exampleModal">
      Open Modal
    </button>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Simple Modal</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Similar product you may be creating which is already exist </p>
            <p>Please recheck or be confirm before create</p>
            <table class="data-table" style="font-size: smaller;">
              <thead>
                <tr>
                  <th>SL</th>
                  <th>Name</th>
                  <th>Full Name</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let x of similarProduct; index as i">
                  <td>{{ i + 1 }}</td>
                  <td>{{ x.name}}</td>
                  <td>{{ x.fullName}}</td>
                  <td>{{ x.description}}</td>
                </tr>
              </tbody>
  
            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="confirmSimilarity()">I Confirm</button>
          </div>
        </div>
      </div>
    </div>
  
  
  </div>
  
  
  <!-- Delete Modal -->